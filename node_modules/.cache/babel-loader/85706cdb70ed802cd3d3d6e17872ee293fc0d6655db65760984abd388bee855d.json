{"ast":null,"code":"import _toConsumableArray from\"E:/Sites/react/Flowers-shop-PrzyGoDa-/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"E:/Sites/react/Flowers-shop-PrzyGoDa-/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"E:/Sites/react/Flowers-shop-PrzyGoDa-/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import{CartItemsContext}from\"../../../context/CartContext\";import flowers from\"../../flowerslist/flowersList\";import{ObjectContext}from\"../../../context/ObjectContext\";import{CART_RENDER_ACTION_TYPE}from\"../../../redusers/cartOrderRender\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var FlowerOptions=function FlowerOptions(){var _useContext=useContext(CartItemsContext),cartValue=_useContext.cartValue,setCartValue=_useContext.setCartValue;var _useContext2=useContext(ObjectContext),cartRender=_useContext2.cartRender,dispatchRender=_useContext2.dispatchRender;var _useState=useState(_objectSpread({},flowers.map(function(el){return el.prise.option_0;}))),_useState2=_slicedToArray(_useState,2),work=_useState2[0],setWork=_useState2[1];var toggleFormCostchange=function toggleFormCostchange(e){e.preventDefault();var selectElements=_toConsumableArray(document.querySelectorAll(\"select\"));var selectedEl=selectElements.indexOf(e.target);var selectedElIndex=selectElements[selectedEl].selectedIndex;var selectedCostChanged=work[selectedEl]=flowers[selectedEl][\"prise\"][\"option_\".concat(selectedElIndex)];setWork(_objectSpread(_objectSpread({},work),{},{selectedCostChanged:selectedCostChanged}));};var toggleClickAddtocart=function toggleClickAddtocart(e){var _cartRender$find;var selectElementsSelected=_toConsumableArray(document.querySelectorAll(\"select\"));var selectElements=_toConsumableArray(document.querySelectorAll(\".buttonHolder button:first-child\"));var selectedEl=selectElements.indexOf(e.target);var workCostSrt=work[selectedEl];var dispatchData=flowers.find(function(i){return i.id===selectedEl;});var dispatchDataProved=(_cartRender$find=cartRender.find(function(i){return i.id===selectedEl;}))===null||_cartRender$find===void 0?void 0:_cartRender$find.id;var selectElementsSelectedId=selectElementsSelected[selectedEl].selectedIndex;setCartValue({cartItem:cartValue.cartItem+1,cartCost:cartValue.cartCost+workCostSrt});if(dispatchDataProved!==selectedEl){dispatchRender({type:CART_RENDER_ACTION_TYPE.ADDING_NEW_POS,cart_Object:{id:selectedEl,quantity:_objectSpread({},Object.keys(dispatchData.options).map(function(el,ind){if(ind===selectElementsSelectedId){return el=1;}else{return el=0;}}))}});}else{dispatchRender({type:CART_RENDER_ACTION_TYPE.CHANGE_QUANTITY,cart_Object:{id:selectedEl,quantity:selectElementsSelectedId}});}};var toggleClickBuyNow=function toggleClickBuyNow(){document.querySelector(\"dialog\").showModal();};return flowers.map(function(element){var bouquetOption=Object.entries(element.options);return/*#__PURE__*/_jsxs(\"article\",{className:\"ChoosingFlowers__container__section\",children:[/*#__PURE__*/_jsx(\"img\",{src:element.img_src,alt:element.name}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"ChoosingFlowers__container__section__part--top\",children:[/*#__PURE__*/_jsx(\"span\",{children:element.name}),/*#__PURE__*/_jsx(\"span\",{children:work[element.id]+\"$\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"ChoosingFlowers__container__section__part--bottom\",children:[/*#__PURE__*/_jsx(\"form\",{onChange:toggleFormCostchange,children:/*#__PURE__*/_jsx(\"select\",{name:\"NumberOfflowers\",className:\"ChoosingFlowers__container__section__select\",children:bouquetOption.map(function(el,number){var bouquet=el[1];return/*#__PURE__*/_jsx(\"option\",{value:bouquet,children:bouquet},number);})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttonHolder\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleClickAddtocart,children:\"To cash\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleClickBuyNow,children:\"Buy now\"})]})]})]})]},element.id);});};","map":{"version":3,"names":["React","useContext","useState","CartItemsContext","flowers","ObjectContext","CART_RENDER_ACTION_TYPE","jsx","_jsx","jsxs","_jsxs","FlowerOptions","_useContext","cartValue","setCartValue","_useContext2","cartRender","dispatchRender","_useState","_objectSpread","map","el","prise","option_0","_useState2","_slicedToArray","work","setWork","toggleFormCostchange","e","preventDefault","selectElements","_toConsumableArray","document","querySelectorAll","selectedEl","indexOf","target","selectedElIndex","selectedIndex","selectedCostChanged","concat","toggleClickAddtocart","_cartRender$find","selectElementsSelected","workCostSrt","dispatchData","find","i","id","dispatchDataProved","selectElementsSelectedId","cartItem","cartCost","type","ADDING_NEW_POS","cart_Object","quantity","Object","keys","options","ind","CHANGE_QUANTITY","toggleClickBuyNow","querySelector","showModal","element","bouquetOption","entries","className","children","src","img_src","alt","name","onChange","number","bouquet","value","onClick"],"sources":["E:/Sites/react/Flowers-shop-PrzyGoDa-/src/components/render/main_page/FlowerOptions.js"],"sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { CartItemsContext } from \"../../../context/CartContext\";\r\nimport flowers from \"../../flowerslist/flowersList\";\r\nimport { ObjectContext } from \"../../../context/ObjectContext\";\r\nimport { CART_RENDER_ACTION_TYPE } from \"../../../redusers/cartOrderRender\";\r\n\r\nexport const FlowerOptions = () => {\r\n  const { cartValue, setCartValue } = useContext(CartItemsContext);\r\n  const { cartRender, dispatchRender } = useContext(ObjectContext);\r\n\r\n  const [work, setWork] = useState({\r\n    ...flowers.map((el) => {\r\n      return el.prise.option_0;\r\n    }),\r\n  });\r\n\r\n  const toggleFormCostchange = (e) => {\r\n    e.preventDefault();\r\n\r\n    const selectElements = [...document.querySelectorAll(\"select\")];\r\n    const selectedEl = selectElements.indexOf(e.target);\r\n    const selectedElIndex = selectElements[selectedEl].selectedIndex;\r\n\r\n    let selectedCostChanged = (work[selectedEl] =\r\n      flowers[selectedEl][\"prise\"][`option_${selectedElIndex}`]);\r\n    setWork({ ...work, selectedCostChanged });\r\n  };\r\n\r\n  const toggleClickAddtocart = (e) => {\r\n    const selectElementsSelected = [...document.querySelectorAll(\"select\")];\r\n    const selectElements = [\r\n      ...document.querySelectorAll(\".buttonHolder button:first-child\"),\r\n    ];\r\n    const selectedEl = selectElements.indexOf(e.target);\r\n    const workCostSrt = work[selectedEl];\r\n    const dispatchData = flowers.find((i) => i.id === selectedEl);\r\n    const dispatchDataProved = cartRender.find((i) => i.id === selectedEl)?.id;\r\n    const selectElementsSelectedId =\r\n      selectElementsSelected[selectedEl].selectedIndex;\r\n\r\n    setCartValue({\r\n      cartItem: cartValue.cartItem + 1,\r\n      cartCost: cartValue.cartCost + workCostSrt,\r\n    });\r\n\r\n    if (dispatchDataProved !== selectedEl) {\r\n      dispatchRender({\r\n        type: CART_RENDER_ACTION_TYPE.ADDING_NEW_POS,\r\n        cart_Object: {\r\n          id: selectedEl,\r\n          quantity: {\r\n            ...Object.keys(dispatchData.options).map((el, ind) => {\r\n              if (ind === selectElementsSelectedId) {\r\n                return (el = 1);\r\n              } else {\r\n                return (el = 0);\r\n              }\r\n            }),\r\n          },\r\n        },\r\n      });\r\n    } else {\r\n      dispatchRender({\r\n        type: CART_RENDER_ACTION_TYPE.CHANGE_QUANTITY,\r\n        cart_Object: {\r\n          id: selectedEl,\r\n          quantity: selectElementsSelectedId,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  const toggleClickBuyNow = () => {\r\n    document.querySelector(\"dialog\").showModal();\r\n  };\r\n\r\n  return flowers.map((element) => {\r\n    let bouquetOption = Object.entries(element.options);\r\n\r\n    return (\r\n      <article className=\"ChoosingFlowers__container__section\" key={element.id}>\r\n        <img src={element.img_src} alt={element.name} />\r\n        <div>\r\n          <section className=\"ChoosingFlowers__container__section__part--top\">\r\n            <span>{element.name}</span>\r\n            <span>{work[element.id] + \"$\"}</span>\r\n          </section>\r\n          <section className=\"ChoosingFlowers__container__section__part--bottom\">\r\n            <form onChange={toggleFormCostchange}>\r\n              <select\r\n                name=\"NumberOfflowers\"\r\n                className=\"ChoosingFlowers__container__section__select\"\r\n              >\r\n                {bouquetOption.map((el, number) => {\r\n                  let bouquet = el[1];\r\n\r\n                  return (\r\n                    <option key={number} value={bouquet}>\r\n                      {bouquet}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </form>\r\n            <div className=\"buttonHolder\">\r\n              <button onClick={toggleClickAddtocart}>To cash</button>\r\n              <button onClick={toggleClickBuyNow}>Buy now</button>\r\n            </div>\r\n          </section>\r\n        </div>\r\n      </article>\r\n    );\r\n  });\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}